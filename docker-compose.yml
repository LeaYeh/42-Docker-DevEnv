services:
  run-container:
    container_name: ${COMPOSE_PROJECT_NAME}
    build:
      dockerfile: .devcontainer/Dockerfile
      args:
        USERNAME: ${USERNAME:-devcontainer}
        UID: ${UID:-1000}
        GID: ${GID:-1000}
        WORKSPACE_FOLDER: /${WORKSPACE_FOLDER:-workspaces/${COMPOSE_PROJECT_NAME}}
    volumes:
      - .:/${WORKSPACE_FOLDER:-workspaces/${COMPOSE_PROJECT_NAME}}
      - ${HOME}/.ssh:/home/${USERNAME:-devcontainer}/.ssh:cached,readonly
      - ${HOME}/.gitconfig:/home/${USERNAME:-devcontainer}/.gitconfig:cached
      - ${HOME}/.zsh_history:/home/${USERNAME:-devcontainer}/.zsh_history:cached
      # Comment in to load .zshrc from your local environment
      # - ${HOME}/.zshrc:/home/${USERNAME:-devcontainer}/.zshrc:cached
    stdin_open: true
    tty: true
